(()=>{"use strict";(()=>{function e(e,t,n,o,r=null){let i=new XMLHttpRequest;i.responseType="json",i.addEventListener("load",(()=>{200===i.status?n(i.response):o(`Произошла ошибка получения: ${i.status} ${i.text}`)})),i.open(e,t),i.send(r)}window.backend={getPictures:function(t,n){e("GET","https://21.javascript.pages.academy/kekstagram/data",t,n)},sendForm:function(t,n,o){e("POST","https://21.javascript.pages.academy/kekstagram",n,o,t)}}})(),window.debounce=function(e){let t=null;return function(){let n=arguments;t&&window.clearTimeout(t),t=window.setTimeout((function(){e.apply(null,n)}),500)}},(()=>{const e=document.querySelector("#picture").content.querySelector(".picture"),t=document.querySelector(".pictures");let n=[],o=[];function r(e){let t=document.createElement("div");t.style="z-index: 100; margin: 0 auto; text-align: center; background-color: red;",t.style.position="absolute",t.style.left="20%",t.style.right="20%",t.style.fontSize="30px",t.style.lineHeight="30px",t.textContent=e,document.body.insertAdjacentElement("afterbegin",t)}window.sentPhotos=[],window.backend.getPictures((function(e){window.sentPhotos=e,window.galleryFilter.addingPhotos(window.sentPhotos)}),r),window.gallery={PICTURES:t,renderPhoto:function(t){let r=e.cloneNode(!0);return r.querySelector(".picture__img").src=t.url,r.querySelector(".picture__likes").textContent=t.likes,r.querySelector(".picture__comments").textContent=t.comments.length,n.push(t.description),o.push(t.comments),r},errorHandler:r,getRandomFromArray:function(e){return e[Math.floor(Math.random()*e.length)]},descriptions:n,comments:o}})(),(()=>{const e=document.querySelector(".img-filters"),t=e.querySelector(".img-filters__form"),n=/\d+/;function o(){for(;window.gallery.PICTURES.children.length>2;)window.gallery.PICTURES.removeChild(window.gallery.PICTURES.lastChild)}function r(e,t){let n=document.createDocumentFragment();for(let o=0;o<t;o++)n.appendChild(window.gallery.renderPhoto(e[o]));window.gallery.PICTURES.appendChild(n)}function i(e){o(),r(e,e.length)}e.classList.remove("img-filters--inactive"),t.addEventListener("click",window.debounce((e=>{switch(e.target.id){case"filter-random":!function(e){let t,n;for(let o=e.length-1;o>0;o--)i=o,t=Math.floor(Math.random()*(i-0+1))+0,n=e[t],e[t]=e[o],e[o]=n;var i;!function(e){o(),r(e,10)}(e)}(window.sentPhotos);break;case"filter-discussed":(t=window.sentPhotos).sort(((e,t)=>t.comments.length-e.comments.length)),i(t);break;default:!function(e){e.sort(((e,t)=>e.url.match(n)-t.url.match(n))),i(e)}(window.sentPhotos)}var t}))),t.addEventListener("click",(e=>{switch(e.target.id){case"filter-random":t.querySelector("#filter-default").classList.remove("img-filters__button--active"),t.querySelector("#filter-discussed").classList.remove("img-filters__button--active"),e.target.classList.add("img-filters__button--active");break;case"filter-discussed":t.querySelector("#filter-default").classList.remove("img-filters__button--active"),t.querySelector("#filter-random").classList.remove("img-filters__button--active"),e.target.classList.add("img-filters__button--active");break;default:t.querySelector("#filter-random").classList.remove("img-filters__button--active"),t.querySelector("#filter-discussed").classList.remove("img-filters__button--active"),e.target.classList.add("img-filters__button--active")}})),window.galleryFilter={addingPhotos:function(e){r(e,e.length)}}})(),(()=>{const e=document.querySelector(".big-picture"),t=e.querySelector(".big-picture__img").querySelector("img"),n=e.querySelector(".likes-count"),o=e.querySelector(".comments-count"),r=e.querySelector(".social__caption"),i=e.querySelector(".social__comments"),l=e.querySelector(".social__comment"),s=e.querySelector(".social__comment-count"),c=e.querySelector(".comments-loader"),a=e.querySelector(".big-picture__cancel"),d=/\d+(?=\D*$)/;let u,m,f,_;function w(e,t){_=window.gallery.comments[u].slice(e,t);let n=document.createDocumentFragment();_.forEach((e=>{let t=l.cloneNode(!0);t.querySelector(".social__text").textContent=e.message,t.querySelector(".social__picture").src=e.avatar,t.querySelector(".social__picture").alt=e.name,n.appendChild(t)})),i.appendChild(n)}function y(){let e;window.gallery.comments[u].length-m>5?e=m+5:(e=window.gallery.comments[u].length,c.classList.add("hidden")),w(m,e),s.firstChild.textContent=e+" из ",m=e}function v(e){"Escape"===e.key&&(e.preventDefault(),E())}function E(){e.classList.add("hidden"),document.removeEventListener("keydown",v),document.querySelector("body").classList.remove("modal-open"),i.innerHTML="",c.removeEventListener("click",y)}window.gallery.PICTURES.addEventListener("click",(l=>{!function(l){l.target&&l.target.matches(".picture__img")&&(t.src=l.target.src,e.classList.remove("hidden"),document.querySelector("body").classList.add("modal-open"),document.addEventListener("keydown",v),c.classList.remove("hidden"),n.textContent=l.target.nextElementSibling.lastElementChild.textContent,o.textContent=l.target.nextElementSibling.firstElementChild.textContent,r.textContent=window.gallery.descriptions[String(l.target.src.match(d))-1],function(e){s.firstChild.textContent="5 из ",u=e.target.src.match(d)-1,window.gallery.comments[u].length<5?(f=window.gallery.comments[u].length,s.firstChild.textContent=window.gallery.comments[u].length+" из ",c.classList.add("hidden")):f=5,i.innerHTML="",w(0,f),m=_.length}(l),c.addEventListener("click",y))}(l)})),window.gallery.PICTURES.addEventListener("keydown",(r=>{"Enter"===r.key&&(t.src=r.target.querySelector("img").src,e.classList.remove("hidden"),document.querySelector("body").classList.add("modal-open"),document.addEventListener("keydown",v),n.textContent=r.target.querySelector(".picture__likes").textContent,o.textContent=r.target.querySelector(".picture__comments").textContent)})),a.addEventListener("click",(()=>{E()})),window.bigPhoto={SOCIAL_CAPTION:r}})(),(()=>{const e="100%",t=document.querySelector("#upload-file"),n=document.querySelector(".img-upload__overlay"),o=n.querySelector("#upload-cancel"),r=n.querySelector(".text__description"),i=document.querySelector(".img-upload__form"),l=document.querySelector("main"),s=document.querySelector("#success").content.querySelector(".success"),c=s.querySelector(".success__overlay"),a=s.querySelector(".success__button"),d=document.querySelector("#error").content.querySelector(".error"),u=d.querySelector(".error__overlay"),m=d.querySelector(".error__button");function f(e){"Escape"===e.key&&document.activeElement!==window.hashtags.TEXT_HASHTAGS&document.activeElement!==r&&(e.preventDefault(),_())}function _(){n.classList.add("hidden"),document.querySelector("body").classList.remove("modal-open"),document.removeEventListener("keydown",f),window.form.UPLOAD_FILE.value=""}function w(){n.classList.remove("hidden"),document.querySelector("body").classList.add("modal-open"),o.addEventListener("click",_),document.addEventListener("keydown",f),window.effects.applyEffect("effects__preview--none"),window.scale.IMG_UPLOAD_PREVIEW.removeAttribute("style"),window.effects.EFFECT_LEVEL.style.display="none",window.scale.SCALE_VALUE.value=e}function y(){window.effects.applyEffect("effects__preview--none"),window.effects.EFFECT_LEVEL.style.display="none",window.hashtags.TEXT_HASHTAGS.value="",r.value="",n.classList.add("hidden"),window.scale.SCALE_VALUE.value=e}function v(){y(),l.insertAdjacentElement("afterbegin",s)}function E(){y(),l.insertAdjacentElement("afterbegin",d)}function L(){document.removeEventListener("keydown",h),a.removeEventListener("click",p),c.removeEventListener("click",p),m.removeEventListener("click",g),u.removeEventListener("click",g)}function p(){s.remove(),L()}function g(){d.remove(),L()}function h(e){e.preventDefault(),"Escape"===e.key&&"success"===l.firstChild.className?p():g()}i.addEventListener("submit",(function(e){e.preventDefault(),window.backend.sendForm(new FormData(i),v,E),document.addEventListener("keydown",h),a.addEventListener("click",p),c.addEventListener("click",p),m.addEventListener("click",g),u.addEventListener("click",g),document.removeEventListener("keydown",f),t.value=""})),t.addEventListener("change",w),window.form={UPLOAD_FILE:t,IMG_UPLOAD_OVERLAY:n,openEditor:w}})(),(()=>{const e="50%",t="75%",n="100%",o=window.form.IMG_UPLOAD_OVERLAY.querySelector(".scale__control--smaller"),r=window.form.IMG_UPLOAD_OVERLAY.querySelector(".scale__control--bigger "),i=window.form.IMG_UPLOAD_OVERLAY.querySelector(".scale__control--value"),l=window.form.IMG_UPLOAD_OVERLAY.querySelector(".img-upload__preview");o.addEventListener("click",(()=>{!function(){switch(i.value){case n:l.style="transform: scale(0.75)",i.value=t;break;case t:l.style="transform: scale(0.5)",i.value=e;break;default:l.style="transform: scale(0.25)",i.value="25%"}}()})),r.addEventListener("click",(()=>{!function(){switch(i.value){case"25%":l.style="transform: scale(0.5)",i.value=e;break;case e:l.style="transform: scale(0.75)",i.value=t;break;default:l.style="transform: scale(1)",i.value=n}}()})),window.scale={IMG_UPLOAD_PREVIEW:l,SCALE_VALUE:i}})(),(()=>{const e=100,t=window.form.IMG_UPLOAD_OVERLAY.querySelector(".effects__list"),n=window.form.IMG_UPLOAD_OVERLAY.querySelector(".effect-level"),o=n.querySelector(".effect-level__value"),r=t.querySelectorAll(".effects__preview"),i=n.querySelector(".effect-level__pin"),l=n.querySelector(".effect-level__depth");function s(e){window.scale.IMG_UPLOAD_PREVIEW.className="img-upload__preview "+e}t.addEventListener("change",(t=>{!function(e){switch(e.target.value){case"chrome":s("effects__preview--chrome"),n.style.display="block";break;case"sepia":s("effects__preview--sepia"),n.style.display="block";break;case"marvin":s("effects__preview--marvin"),n.style.display="block";break;case"phobos":s("effects__preview--phobos"),n.style.display="block";break;case"heat":s("effects__preview--heat"),n.style.display="block";break;default:s("effects__preview--none"),n.style.display="none"}}(t),window.scale.IMG_UPLOAD_PREVIEW.removeAttribute("style"),window.scale.SCALE_VALUE.value="100%",l.style.width="100%",i.style.left="100%",o.setAttribute("value",e)})),i.addEventListener("mousedown",(t=>{t.preventDefault();let n=t.clientX;function r(t){t.preventDefault();let o=n-t.clientX;n=t.clientX;let r=i.offsetLeft-o;i.style.left=r+"px",l.style.width=r*e/450+"%",r>=450&&(i.style.left="450px",l.style.width="100%"),r<="0"&&(i.style.left="0px",l.style.width="0%")}window.form.IMG_UPLOAD_OVERLAY.addEventListener("mousemove",r),window.form.IMG_UPLOAD_OVERLAY.addEventListener("mouseup",(function t(n){n.preventDefault();let i=parseFloat(l.style.width);o.setAttribute("value",i),function(t){switch(window.scale.IMG_UPLOAD_PREVIEW.className){case"img-upload__preview effects__preview--chrome":window.scale.IMG_UPLOAD_PREVIEW.style=`filter: grayscale(${t/e})`;break;case"img-upload__preview effects__preview--sepia":window.scale.IMG_UPLOAD_PREVIEW.style=`filter: sepia(${t/e})`;break;case"img-upload__preview effects__preview--marvin":window.scale.IMG_UPLOAD_PREVIEW.style=`filter: invert(${t}%)`;break;case"img-upload__preview effects__preview--phobos":window.scale.IMG_UPLOAD_PREVIEW.style=`filter: blur(${t/33.3}px)`;break;case"img-upload__preview effects__preview--heat":window.scale.IMG_UPLOAD_PREVIEW.style=`filter: brightness(${t/50+1})`}}(i),window.form.IMG_UPLOAD_OVERLAY.removeEventListener("mousemove",r),window.form.IMG_UPLOAD_OVERLAY.removeEventListener("mouseup",t)}))})),window.effects={MAX_VALUE:e,applyEffect:s,EFFECT_LEVEL:n,EFFECTS_PREVIEWS:r}})(),(()=>{const e=window.form.IMG_UPLOAD_OVERLAY.querySelector(".text__hashtags"),t=window.form.IMG_UPLOAD_OVERLAY.querySelector(".img-upload__submit"),n=/^(#[a-zA-Zа-яА-Я0-9]{1,19}|$)$/;t.addEventListener("click",(()=>{!function(){let t=e.value.toLowerCase().split(" ").filter((function(e){return e}));t.forEach(((o,r)=>{n.test(o)||e.setCustomValidity("некорректный хэш-тэг"),o.indexOf("#",1)>-1&&e.setCustomValidity("хэш-теги разделяются пробелами"),t.length>5&&e.setCustomValidity("нельзя указать больше 5 хэш-тегов"),t.indexOf(o,r+1)>-1&&e.setCustomValidity("один и тот же хэш-тег не может быть использован дважды")}))}()})),e.addEventListener("input",(()=>{e.setCustomValidity("")})),window.hashtags={TEXT_HASHTAGS:e}})(),(()=>{const e=["gif","jpg","jpeg","png"],t=window.scale.IMG_UPLOAD_PREVIEW.querySelector("img");window.form.UPLOAD_FILE.addEventListener("change",(()=>{let n=window.form.UPLOAD_FILE.files[0],o=n.name.toLowerCase();if(e.some((function(e){return o.endsWith(e)}))){let e=new FileReader;e.addEventListener("load",(()=>{t.src=e.result,window.effects.EFFECTS_PREVIEWS.forEach((t=>{t.style.backgroundImage=`url("${e.result}")`}))})),e.readAsDataURL(n)}}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9rZWtzdGFncmFtLy4vanMvYmFja2VuZC5qcyIsIndlYnBhY2s6Ly9rZWtzdGFncmFtLy4vanMvZGVib3VuY2UuanMiLCJ3ZWJwYWNrOi8va2Vrc3RhZ3JhbS8uL2pzL2dhbGxlcnkuanMiLCJ3ZWJwYWNrOi8va2Vrc3RhZ3JhbS8uL2pzL2dhbGxlcnktZmlsdGVyLmpzIiwid2VicGFjazovL2tla3N0YWdyYW0vLi9qcy9iaWctcGhvdG8uanMiLCJ3ZWJwYWNrOi8va2Vrc3RhZ3JhbS8uL2pzL2Zvcm0uanMiLCJ3ZWJwYWNrOi8va2Vrc3RhZ3JhbS8uL2pzL3NjYWxlLmpzIiwid2VicGFjazovL2tla3N0YWdyYW0vLi9qcy9lZmZlY3RzLmpzIiwid2VicGFjazovL2tla3N0YWdyYW0vLi9qcy9oYXNodGFncy5qcyIsIndlYnBhY2s6Ly9rZWtzdGFncmFtLy4vanMvcHJldmlldy5qcyJdLCJuYW1lcyI6WyJyZXF1ZXN0IiwibWV0aG9kIiwidXJsIiwib25TdWNjZXNzIiwib25FcnJvciIsImRhdGEiLCJ4aHIiLCJYTUxIdHRwUmVxdWVzdCIsInJlc3BvbnNlVHlwZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJzdGF0dXMiLCJyZXNwb25zZSIsInRleHQiLCJvcGVuIiwic2VuZCIsIndpbmRvdyIsImJhY2tlbmQiLCJnZXRQaWN0dXJlcyIsInNlbmRGb3JtIiwiZGVib3VuY2UiLCJjYiIsImxhc3RUaW1lb3V0IiwicGFyYW1ldGVycyIsImFyZ3VtZW50cyIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJhcHBseSIsIlRFTVBMQVRFX1BJQ1RVUkUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiUElDVFVSRVMiLCJkZXNjcmlwdGlvbnMiLCJjb21tZW50cyIsImVycm9ySGFuZGxlciIsImVycm9yTWVzc2FnZSIsIm5vZGUiLCJjcmVhdGVFbGVtZW50Iiwic3R5bGUiLCJwb3NpdGlvbiIsImxlZnQiLCJyaWdodCIsImZvbnRTaXplIiwibGluZUhlaWdodCIsInRleHRDb250ZW50IiwiYm9keSIsImluc2VydEFkamFjZW50RWxlbWVudCIsInNlbnRQaG90b3MiLCJnYWxsZXJ5RmlsdGVyIiwiYWRkaW5nUGhvdG9zIiwiZ2FsbGVyeSIsInJlbmRlclBob3RvIiwicGhvdG8iLCJwaG90b0VsZW1lbnQiLCJjbG9uZU5vZGUiLCJzcmMiLCJsaWtlcyIsImxlbmd0aCIsInB1c2giLCJkZXNjcmlwdGlvbiIsImdldFJhbmRvbUZyb21BcnJheSIsImFyciIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsIklNR19GSUxURVJTIiwiSU1HX0ZJTFRFUlNfRk9STSIsIk5VTUJFUl9JTl9TVFJJTkciLCJyZW1vdmVQaG90byIsImNoaWxkcmVuIiwicmVtb3ZlQ2hpbGQiLCJsYXN0Q2hpbGQiLCJhZGRQaG90b3MiLCJwaG90b3MiLCJmcmFnbWVudCIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJpIiwiYXBwZW5kQ2hpbGQiLCJyZXBsYWNpbmdQaG90b3MiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJldnQiLCJ0YXJnZXQiLCJpZCIsInJhbmRvbU51bWJlciIsImdldFJhbmRvbUVsZW1lbnQiLCJtYXgiLCJhZGRpbmdMaW1pdGVkUGhvdG9zIiwiZ2V0UmFuZG9tUGhvdG9zIiwic29ydCIsInByZXYiLCJuZXh0IiwibWF0Y2giLCJnZXREZWZhdWx0UGhvdG9zIiwiYWRkIiwiQklHX1BJQ1RVUkUiLCJCSUdfUElDVFVSRV9JTUciLCJCSUdfUElDVFVSRV9MSUtFUyIsIkJJR19QSUNUVVJFX0NPTU1FTlRTIiwiU09DSUFMX0NBUFRJT04iLCJTT0NJQUxfQ09NTUVOVFMiLCJTT0NJQUxfQ09NTUVOVCIsIlNPQ0lBTF9DT01NRU5UX0NPVU5UIiwiQ09NTUVOVFNfTE9BREVSIiwiQklHX1BJQ1RVUkVfQ0FOQ0VMIiwiTEFTVF9OVU1CRVJfSU5fU1RSSU5HIiwidGFyZ2V0SW5kZXgiLCJsYXN0Q29tbWVudHMiLCJzdGFydFF1YW50aXR5IiwicmVuZGVyQ29tbWVudHMiLCJzdGFydCIsImVuZCIsInNsaWNlIiwiZm9yRWFjaCIsImNvbW1lbnQiLCJ0ZW1wbGF0ZVNvY2lhbENvbW1lbnQiLCJtZXNzYWdlIiwiYXZhdGFyIiwiYWx0IiwibmFtZSIsIm9uTG9hZENvbW1lbnRzIiwiZW5kU2hvdyIsImZpcnN0Q2hpbGQiLCJvbkNsb3NlQmlnUGhvdG9Fc2MiLCJrZXkiLCJwcmV2ZW50RGVmYXVsdCIsImNsb3NlQmlnUGhvdG8iLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiaW5uZXJIVE1MIiwibWF0Y2hlcyIsIm5leHRFbGVtZW50U2libGluZyIsImxhc3RFbGVtZW50Q2hpbGQiLCJmaXJzdEVsZW1lbnRDaGlsZCIsIlN0cmluZyIsImdldFN0YXJ0Q29tbWVudHMiLCJvcGVuQmlnUGhvdG8iLCJiaWdQaG90byIsIkRFRkFVTFRfU0NBTEUiLCJVUExPQURfRklMRSIsIklNR19VUExPQURfT1ZFUkxBWSIsIlVQTE9BRF9DQU5DRUwiLCJURVhUX0RFU0NSSVBUSU9OIiwiVVBMT0FEX0ZPUk0iLCJNQUlOIiwiVEVNUExBVEVfU1VDQ0VTUyIsIlNVQ0NFU1NfT1ZFUkxBWSIsIlNVQ0NFU1NfQlVUVE9OIiwiVEVNUExBVEVfRVJST1IiLCJFUlJPUl9PVkVSTEFZIiwiRVJST1JfQlVUVE9OIiwib25FZGl0b3JFc2NQcmVzcyIsImFjdGl2ZUVsZW1lbnQiLCJoYXNodGFncyIsIlRFWFRfSEFTSFRBR1MiLCJjbG9zZUVkaXRvciIsImZvcm0iLCJ2YWx1ZSIsIm9wZW5FZGl0b3IiLCJlZmZlY3RzIiwiYXBwbHlFZmZlY3QiLCJzY2FsZSIsIklNR19VUExPQURfUFJFVklFVyIsInJlbW92ZUF0dHJpYnV0ZSIsIkVGRkVDVF9MRVZFTCIsImRpc3BsYXkiLCJTQ0FMRV9WQUxVRSIsInJlc2V0Rm9ybSIsInN1Y2Nlc3NIYW5kbGVyIiwiY2xlYW5FdmVudHMiLCJvblJlc3VsdEVzY1ByZXNzIiwib25TdWNjZXNzQ2xvc2UiLCJvbkVycm9yQ2xvc2UiLCJjbGFzc05hbWUiLCJGb3JtRGF0YSIsIkhBTEZfUEVSQ0VOVCIsIlRIUkVFX1FVQVJURVJTX1BFUkNFTlQiLCJNQVhfVkFMVUVfUEVSQ0VOVCIsIlNDQUxFX1NNQUxMRVIiLCJTQ0FMRV9CSUdHRVIiLCJkZWNyZWFzZVNjYWxlIiwiaW5jcmVhc2VTY2FsZSIsIk1BWF9WQUxVRSIsIkVGRkVDVFNfTElTVCIsIkVGRkVDVF9MRVZFTF9WQUxVRSIsIkVGRkVDVFNfUFJFVklFV1MiLCJxdWVyeVNlbGVjdG9yQWxsIiwiRUZGRUNUX0xFVkVMX1BJTiIsIkVGRkVDVF9MRVZFTF9ERVBUSCIsImVmZmVjdCIsInNlbGVjdEVmZmVjdCIsIndpZHRoIiwic2V0QXR0cmlidXRlIiwic3RhcnRYIiwiY2xpZW50WCIsIm9uTW91c2VNb3ZlIiwibW92ZUV2dCIsInNoaWZ0IiwicG9zaXRpb25QaW4iLCJvZmZzZXRMZWZ0Iiwib25Nb3VzZVVwIiwidXBFdnQiLCJ2YWx1ZURlcHRoIiwicGFyc2VGbG9hdCIsInNldEludGVuc2l0eUVmZmVjdCIsIklNR19VUExPQURfU1VCTUlUIiwiUkUiLCJ0b0xvd2VyQ2FzZSIsInNwbGl0IiwiZmlsdGVyIiwidGFnIiwidGVzdCIsInNldEN1c3RvbVZhbGlkaXR5IiwiaW5kZXhPZiIsImdldENoZWNrSGFzaHRhZ3MiLCJGSUxFX1RZUEVTIiwiUFJFVklFVyIsImZpbGUiLCJmaWxlcyIsImZpbGVOYW1lIiwic29tZSIsIml0IiwiZW5kc1dpdGgiLCJyZWFkZXIiLCJGaWxlUmVhZGVyIiwicmVzdWx0IiwicHJldmlldyIsImJhY2tncm91bmRJbWFnZSIsInJlYWRBc0RhdGFVUkwiXSwibWFwcGluZ3MiOiJ5QkFNQSxTQUFTQSxFQUFRQyxFQUFRQyxFQUFLQyxFQUFXQyxFQUFTQyxFQUFPLE1BQ3ZELElBQUlDLEVBQU0sSUFBSUMsZUFDZEQsRUFBSUUsYUFBZSxPQUVuQkYsRUFBSUcsaUJBQWlCLFFBQVEsS0FOYixNQU9WSCxFQUFJSSxPQUNOUCxFQUFVRyxFQUFJSyxVQUVkUCxFQUFRLCtCQUErQkUsRUFBSUksVUFB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Qix3QkFFOUJGLEVBQUlHLFFBQVEsSUFBSyxJQUFNLEdBQ3pCM0QsRUFBYzBELGtCQUFrQixrQ0FFOUIzRCxFQUFTL0YsT0FsQlMsR0FtQnBCZ0csRUFBYzBELGtCQUFrQixxQ0FFOUIzRCxFQUFTNEQsUUFBUUgsRUFBS3JJLEVBQUksSUFBTSxHQUNsQzZFLEVBQWMwRCxrQkFDWiw2REFXTkUsTUFHRjVELEVBQWNoSixpQkFBaUIsU0FBUyxLQVB0Q2dKLEVBQWMwRCxrQkFBa0IsT0FXbENwTSxPQUFPeUksU0FBVyxDQUNoQkMsa0IsU0MxQ0YsTUFBTTZELEVBQWEsQ0FBQyxNQUFPLE1BQU8sT0FBUSxPQUVwQ0MsRUFBVXhNLE9BQU9pSixNQUFNQyxtQkFBbUJwSSxjQUFjLE9BRTlEZCxPQUFPNEksS0FBS2pCLFlBQVlqSSxpQkFBaUIsVUFBVSxLQUNqRCxJQUFJK00sRUFBT3pNLE9BQU80SSxLQUFLakIsWUFBWStFLE1BQU0sR0FDckNDLEVBQVdGLEVBQUtqRyxLQUFLdUYsY0FNekIsR0FKY1EsRUFBV0ssTUFBSyxTQUFVQyxHQUN0QyxPQUFPRixFQUFTRyxTQUFTRCxNQUdkLENBQ1gsSUFBSUUsRUFBUyxJQUFJQyxXQUVqQkQsRUFBT3JOLGlCQUFpQixRQUFRLEtBQzlCOE0sRUFBUWhLLElBQU11SyxFQUFPRSxPQUNyQmpOLE9BQU8rSSxRQUFRMEIsaUJBQWlCdkUsU0FBU2dILElBQ3ZDQSxFQUFRM0wsTUFBTTRMLGdCQUFrQixRQUFRSixFQUFPRSxpQkFJbkRGLEVBQU9LLGNBQWNYLFEiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBVUkxfR0VUID0gYGh0dHBzOi8vMjEuamF2YXNjcmlwdC5wYWdlcy5hY2FkZW15L2tla3N0YWdyYW0vZGF0YWA7XG5jb25zdCBVUkxfUE9TVCA9IGBodHRwczovLzIxLmphdmFzY3JpcHQucGFnZXMuYWNhZGVteS9rZWtzdGFncmFtYDtcbmNvbnN0IFNUQVRVU19PSyA9IDIwMDtcblxuZnVuY3Rpb24gcmVxdWVzdChtZXRob2QsIHVybCwgb25TdWNjZXNzLCBvbkVycm9yLCBkYXRhID0gbnVsbCkge1xuICBsZXQgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gIHhoci5yZXNwb25zZVR5cGUgPSBganNvbmA7XG5cbiAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoYGxvYWRgLCAoKSA9PiB7XG4gICAgaWYgKHhoci5zdGF0dXMgPT09IFNUQVRVU19PSykge1xuICAgICAgb25TdWNjZXNzKHhoci5yZXNwb25zZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9uRXJyb3IoYNCf0YDQvtC40LfQvtGI0LvQsCDQvtGI0LjQsdC60LAg0L/QvtC70YPRh9C10L3QuNGPOiAke3hoci5zdGF0dXN9ICR7eGhyLnRleHR9YCk7XG4gICAgfVxuICB9KTtcbiAgeGhyLm9wZW4obWV0aG9kLCB1cmwpO1xuICB4aHIuc2VuZChkYXRhKTtcbn1cblxuZnVuY3Rpb24gZ2V0UGljdHVyZXMob25TdWNjZXNzLCBvbkVycm9yKSB7XG4gIHJlcXVlc3QoYEdFVGAsIFVSTF9HRVQsIG9uU3VjY2Vzcywgb25FcnJvcik7XG59XG5cbmZ1bmN0aW9uIHNlbmRGb3JtKGRhdGEsIG9uU3VjY2Vzcywgb25FcnJvcikge1xuICByZXF1ZXN0KGBQT1NUYCwgVVJMX1BPU1QsIG9uU3VjY2Vzcywgb25FcnJvciwgZGF0YSk7XG59XG5cblxud2luZG93LmJhY2tlbmQgPSB7XG4gIGdldFBpY3R1cmVzLFxuICBzZW5kRm9ybVxufTtcbiIsIi8qIGVzbGludC1kaXNhYmxlICovXG4ndXNlIHN0cmljdCc7XG5cbmNvbnN0IERFQk9VTkNFX0lOVEVSVkFMID0gNTAwO1xuXG53aW5kb3cuZGVib3VuY2UgPSBmdW5jdGlvbiAoY2IpIHtcbiAgbGV0IGxhc3RUaW1lb3V0ID0gbnVsbDtcblxuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIGxldCBwYXJhbWV0ZXJzID0gYXJndW1lbnRzO1xuICAgIGlmIChsYXN0VGltZW91dCkge1xuICAgICAgd2luZG93LmNsZWFyVGltZW91dChsYXN0VGltZW91dCk7XG4gICAgfVxuICAgIGxhc3RUaW1lb3V0ID0gd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgY2IuYXBwbHkobnVsbCwgcGFyYW1ldGVycyk7XG4gICAgfSwgREVCT1VOQ0VfSU5URVJWQUwpO1xuICB9O1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxuY29uc3QgVEVNUExBVEVfUElDVFVSRSA9IGRvY3VtZW50XG4gIC5xdWVyeVNlbGVjdG9yKGAjcGljdHVyZWApXG4gIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoYC5waWN0dXJlYCk7XG5jb25zdCBQSUNUVVJFUyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5waWN0dXJlc2ApO1xuXG5mdW5jdGlvbiBnZXRSYW5kb21Gcm9tQXJyYXkoYXJyKSB7XG4gIHJldHVybiBhcnJbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYXJyLmxlbmd0aCldO1xufVxuXG5sZXQgZGVzY3JpcHRpb25zID0gW107XG5sZXQgY29tbWVudHMgPSBbXTtcblxuZnVuY3Rpb24gcmVuZGVyUGhvdG8ocGhvdG8pIHtcbiAgbGV0IHBob3RvRWxlbWVudCA9IFRFTVBMQVRFX1BJQ1RVUkUuY2xvbmVOb2RlKHRydWUpO1xuXG4gIHBob3RvRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAucGljdHVyZV9faW1nYCkuc3JjID0gcGhvdG8udXJsO1xuICBwaG90b0VsZW1lbnQucXVlcnlTZWxlY3RvcihgLnBpY3R1cmVfX2xpa2VzYCkudGV4dENvbnRlbnQgPSBwaG90by5saWtlcztcbiAgcGhvdG9FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC5waWN0dXJlX19jb21tZW50c2ApLnRleHRDb250ZW50ID1cbiAgICBwaG90by5jb21tZW50cy5sZW5ndGg7XG5cbiAgZGVzY3JpcHRpb25zLnB1c2gocGhvdG8uZGVzY3JpcHRpb24pO1xuICBjb21tZW50cy5wdXNoKHBob3RvLmNvbW1lbnRzKTtcblxuICByZXR1cm4gcGhvdG9FbGVtZW50O1xufVxuXG53aW5kb3cuc2VudFBob3RvcyA9IFtdO1xuXG5mdW5jdGlvbiBzdWNjZXNIYW5kbGVyKGRhdGEpIHtcbiAgd2luZG93LnNlbnRQaG90b3MgPSBkYXRhO1xuICB3aW5kb3cuZ2FsbGVyeUZpbHRlci5hZGRpbmdQaG90b3Mod2luZG93LnNlbnRQaG90b3MpO1xufVxuXG5mdW5jdGlvbiBlcnJvckhhbmRsZXIoZXJyb3JNZXNzYWdlKSB7XG4gIGxldCBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChgZGl2YCk7XG4gIG5vZGUuc3R5bGUgPSBgei1pbmRleDogMTAwOyBtYXJnaW46IDAgYXV0bzsgdGV4dC1hbGlnbjogY2VudGVyOyBiYWNrZ3JvdW5kLWNvbG9yOiByZWQ7YDtcbiAgbm9kZS5zdHlsZS5wb3NpdGlvbiA9IGBhYnNvbHV0ZWA7XG4gIG5vZGUuc3R5bGUubGVmdCA9IGAyMCVgO1xuICBub2RlLnN0eWxlLnJpZ2h0ID0gYDIwJWA7XG4gIG5vZGUuc3R5bGUuZm9udFNpemUgPSBgMzBweGA7XG4gIG5vZGUuc3R5bGUubGluZUhlaWdodCA9IGAzMHB4YDtcblxuICBub2RlLnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xuICBkb2N1bWVudC5ib2R5Lmluc2VydEFkamFjZW50RWxlbWVudChgYWZ0ZXJiZWdpbmAsIG5vZGUpO1xufVxuXG53aW5kb3cuYmFja2VuZC5nZXRQaWN0dXJlcyhzdWNjZXNIYW5kbGVyLCBlcnJvckhhbmRsZXIpO1xuXG53aW5kb3cuZ2FsbGVyeSA9IHtcbiAgUElDVFVSRVMsXG4gIHJlbmRlclBob3RvLFxuICBlcnJvckhhbmRsZXIsXG4gIGdldFJhbmRvbUZyb21BcnJheSxcbiAgZGVzY3JpcHRpb25zLFxuICBjb21tZW50c1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxuY29uc3QgUVVBTlRJVFlfUEhPVE9TID0gMTA7XG5jb25zdCBGSVJTVF9UV09fRUxFTUVOVFMgPSAyO1xuXG5jb25zdCBJTUdfRklMVEVSUyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5pbWctZmlsdGVyc2ApO1xuY29uc3QgSU1HX0ZJTFRFUlNfRk9STSA9IElNR19GSUxURVJTLnF1ZXJ5U2VsZWN0b3IoYC5pbWctZmlsdGVyc19fZm9ybWApO1xuY29uc3QgTlVNQkVSX0lOX1NUUklORyA9IC9cXGQrLztcblxuSU1HX0ZJTFRFUlMuY2xhc3NMaXN0LnJlbW92ZShgaW1nLWZpbHRlcnMtLWluYWN0aXZlYCk7XG5cbmZ1bmN0aW9uIHJlbW92ZVBob3RvKCkge1xuICB3aGlsZSAod2luZG93LmdhbGxlcnkuUElDVFVSRVMuY2hpbGRyZW4ubGVuZ3RoID4gRklSU1RfVFdPX0VMRU1FTlRTKSB7XG4gICAgd2luZG93LmdhbGxlcnkuUElDVFVSRVMucmVtb3ZlQ2hpbGQod2luZG93LmdhbGxlcnkuUElDVFVSRVMubGFzdENoaWxkKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBhZGRQaG90b3MocGhvdG9zLCBsZW5ndGgpIHtcbiAgbGV0IGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQod2luZG93LmdhbGxlcnkucmVuZGVyUGhvdG8ocGhvdG9zW2ldKSk7XG4gIH1cbiAgd2luZG93LmdhbGxlcnkuUElDVFVSRVMuYXBwZW5kQ2hpbGQoZnJhZ21lbnQpO1xufVxuXG5mdW5jdGlvbiBhZGRpbmdQaG90b3MocGhvdG9zKSB7XG4gIGFkZFBob3RvcyhwaG90b3MsIHBob3Rvcy5sZW5ndGgpO1xufVxuXG5mdW5jdGlvbiByZXBsYWNpbmdQaG90b3MocGhvdG9zKSB7XG4gIHJlbW92ZVBob3RvKCk7XG4gIGFkZFBob3RvcyhwaG90b3MsIHBob3Rvcy5sZW5ndGgpO1xufVxuXG5mdW5jdGlvbiBhZGRpbmdMaW1pdGVkUGhvdG9zKHBob3Rvcykge1xuICByZW1vdmVQaG90bygpO1xuICBhZGRQaG90b3MocGhvdG9zLCBRVUFOVElUWV9QSE9UT1MpO1xufVxuXG5mdW5jdGlvbiBnZXREZWZhdWx0UGhvdG9zKHBob3Rvcykge1xuICBwaG90b3Muc29ydCgocHJldiwgbmV4dCkgPT4ge1xuICAgIHJldHVybiBwcmV2LnVybC5tYXRjaChOVU1CRVJfSU5fU1RSSU5HKSAtIG5leHQudXJsLm1hdGNoKE5VTUJFUl9JTl9TVFJJTkcpO1xuICB9KTtcbiAgcmVwbGFjaW5nUGhvdG9zKHBob3Rvcyk7XG59XG5cbmZ1bmN0aW9uIGdldFJhbmRvbU51bWJlcihtaW4sIG1heCkge1xuICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpKSArIG1pbjtcbn1cblxuZnVuY3Rpb24gZ2V0UmFuZG9tUGhvdG9zKHBob3Rvcykge1xuICBsZXQgcmFuZG9tTnVtYmVyO1xuICBsZXQgZ2V0UmFuZG9tRWxlbWVudDtcbiAgZm9yIChsZXQgaSA9IHBob3Rvcy5sZW5ndGggLSAxOyBpID4gMDsgaS0tKSB7XG4gICAgcmFuZG9tTnVtYmVyID0gZ2V0UmFuZG9tTnVtYmVyKDAsIGkpO1xuICAgIGdldFJhbmRvbUVsZW1lbnQgPSBwaG90b3NbcmFuZG9tTnVtYmVyXTtcbiAgICBwaG90b3NbcmFuZG9tTnVtYmVyXSA9IHBob3Rvc1tpXTtcbiAgICBwaG90b3NbaV0gPSBnZXRSYW5kb21FbGVtZW50O1xuICB9XG4gIGFkZGluZ0xpbWl0ZWRQaG90b3MocGhvdG9zKTtcbn1cblxuXG5mdW5jdGlvbiBnZXREaXNjdXNzZWRQaG90b3MocGhvdG9zKSB7XG4gIHBob3Rvcy5zb3J0KChwcmV2LCBuZXh0KSA9PiB7XG4gICAgcmV0dXJuIG5leHQuY29tbWVudHMubGVuZ3RoIC0gcHJldi5jb21tZW50cy5sZW5ndGg7XG4gIH0pO1xuICByZXBsYWNpbmdQaG90b3MocGhvdG9zKTtcbn1cblxuSU1HX0ZJTFRFUlNfRk9STS5hZGRFdmVudExpc3RlbmVyKGBjbGlja2AsIHdpbmRvdy5kZWJvdW5jZSgoZXZ0KSA9PiB7XG4gIHN3aXRjaCAoZXZ0LnRhcmdldC5pZCkge1xuICAgIGNhc2UgYGZpbHRlci1yYW5kb21gOlxuICAgICAgZ2V0UmFuZG9tUGhvdG9zKHdpbmRvdy5zZW50UGhvdG9zKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgYGZpbHRlci1kaXNjdXNzZWRgOlxuICAgICAgZ2V0RGlzY3Vzc2VkUGhvdG9zKHdpbmRvdy5zZW50UGhvdG9zKTtcbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICBnZXREZWZhdWx0UGhvdG9zKHdpbmRvdy5zZW50UGhvdG9zKTtcbiAgICAgIGJyZWFrO1xuICB9XG59KSk7XG5cbklNR19GSUxURVJTX0ZPUk0uYWRkRXZlbnRMaXN0ZW5lcihgY2xpY2tgLCAoZXZ0KSA9PiB7XG4gIHN3aXRjaCAoZXZ0LnRhcmdldC5pZCkge1xuICAgIGNhc2UgYGZpbHRlci1yYW5kb21gOlxuICAgICAgSU1HX0ZJTFRFUlNfRk9STS5xdWVyeVNlbGVjdG9yKGAjZmlsdGVyLWRlZmF1bHRgKS5jbGFzc0xpc3QucmVtb3ZlKGBpbWctZmlsdGVyc19fYnV0dG9uLS1hY3RpdmVgKTtcbiAgICAgIElNR19GSUxURVJTX0ZPUk0ucXVlcnlTZWxlY3RvcihgI2ZpbHRlci1kaXNjdXNzZWRgKS5jbGFzc0xpc3QucmVtb3ZlKGBpbWctZmlsdGVyc19fYnV0dG9uLS1hY3RpdmVgKTtcbiAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmFkZChgaW1nLWZpbHRlcnNfX2J1dHRvbi0tYWN0aXZlYCk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIGBmaWx0ZXItZGlzY3Vzc2VkYDpcbiAgICAgIElNR19GSUxURVJTX0ZPUk0ucXVlcnlTZWxlY3RvcihgI2ZpbHRlci1kZWZhdWx0YCkuY2xhc3NMaXN0LnJlbW92ZShgaW1nLWZpbHRlcnNfX2J1dHRvbi0tYWN0aXZlYCk7XG4gICAgICBJTUdfRklMVEVSU19GT1JNLnF1ZXJ5U2VsZWN0b3IoYCNmaWx0ZXItcmFuZG9tYCkuY2xhc3NMaXN0LnJlbW92ZShgaW1nLWZpbHRlcnNfX2J1dHRvbi0tYWN0aXZlYCk7XG4gICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5hZGQoYGltZy1maWx0ZXJzX19idXR0b24tLWFjdGl2ZWApO1xuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIElNR19GSUxURVJTX0ZPUk0ucXVlcnlTZWxlY3RvcihgI2ZpbHRlci1yYW5kb21gKS5jbGFzc0xpc3QucmVtb3ZlKGBpbWctZmlsdGVyc19fYnV0dG9uLS1hY3RpdmVgKTtcbiAgICAgIElNR19GSUxURVJTX0ZPUk0ucXVlcnlTZWxlY3RvcihgI2ZpbHRlci1kaXNjdXNzZWRgKS5jbGFzc0xpc3QucmVtb3ZlKGBpbWctZmlsdGVyc19fYnV0dG9uLS1hY3RpdmVgKTtcbiAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmFkZChgaW1nLWZpbHRlcnNfX2J1dHRvbi0tYWN0aXZlYCk7XG4gICAgICBicmVhaztcbiAgfVxufSk7XG5cbndpbmRvdy5nYWxsZXJ5RmlsdGVyID0ge1xuICBhZGRpbmdQaG90b3Ncbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbmNvbnN0IE1JTl9ESVNQTEFZRURfQ09NTUVOVFMgPSA1O1xuXG5jb25zdCBCSUdfUElDVFVSRSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5iaWctcGljdHVyZWApO1xuY29uc3QgQklHX1BJQ1RVUkVfSU1HID0gQklHX1BJQ1RVUkVcbiAgLnF1ZXJ5U2VsZWN0b3IoYC5iaWctcGljdHVyZV9faW1nYClcbiAgLnF1ZXJ5U2VsZWN0b3IoYGltZ2ApO1xuY29uc3QgQklHX1BJQ1RVUkVfTElLRVMgPSBCSUdfUElDVFVSRS5xdWVyeVNlbGVjdG9yKGAubGlrZXMtY291bnRgKTtcbmNvbnN0IEJJR19QSUNUVVJFX0NPTU1FTlRTID0gQklHX1BJQ1RVUkUucXVlcnlTZWxlY3RvcihgLmNvbW1lbnRzLWNvdW50YCk7XG5jb25zdCBTT0NJQUxfQ0FQVElPTiA9IEJJR19QSUNUVVJFLnF1ZXJ5U2VsZWN0b3IoYC5zb2NpYWxfX2NhcHRpb25gKTtcbmNvbnN0IFNPQ0lBTF9DT01NRU5UUyA9IEJJR19QSUNUVVJFLnF1ZXJ5U2VsZWN0b3IoYC5zb2NpYWxfX2NvbW1lbnRzYCk7XG5jb25zdCBTT0NJQUxfQ09NTUVOVCA9IEJJR19QSUNUVVJFLnF1ZXJ5U2VsZWN0b3IoYC5zb2NpYWxfX2NvbW1lbnRgKTtcbmNvbnN0IFNPQ0lBTF9DT01NRU5UX0NPVU5UID0gQklHX1BJQ1RVUkUucXVlcnlTZWxlY3RvcihgLnNvY2lhbF9fY29tbWVudC1jb3VudGApO1xuY29uc3QgQ09NTUVOVFNfTE9BREVSID0gQklHX1BJQ1RVUkUucXVlcnlTZWxlY3RvcihgLmNvbW1lbnRzLWxvYWRlcmApO1xuY29uc3QgQklHX1BJQ1RVUkVfQ0FOQ0VMID0gQklHX1BJQ1RVUkUucXVlcnlTZWxlY3RvcihgLmJpZy1waWN0dXJlX19jYW5jZWxgKTtcbmNvbnN0IExBU1RfTlVNQkVSX0lOX1NUUklORyA9ICgvXFxkKyg/PVxcRCokKS8pO1xuXG5sZXQgdGFyZ2V0SW5kZXg7XG5sZXQgbGFzdENvbW1lbnRzO1xubGV0IHN0YXJ0UXVhbnRpdHk7XG5sZXQgY29tbWVudHM7XG5cbmZ1bmN0aW9uIHJlbmRlckNvbW1lbnRzKHN0YXJ0LCBlbmQpIHtcbiAgY29tbWVudHMgPSB3aW5kb3cuZ2FsbGVyeS5jb21tZW50c1t0YXJnZXRJbmRleF0uc2xpY2Uoc3RhcnQsIGVuZCk7XG5cbiAgbGV0IGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICBjb21tZW50cy5mb3JFYWNoKChjb21tZW50KSA9PiB7XG4gICAgbGV0IHRlbXBsYXRlU29jaWFsQ29tbWVudCA9IFNPQ0lBTF9DT01NRU5ULmNsb25lTm9kZSh0cnVlKTtcbiAgICB0ZW1wbGF0ZVNvY2lhbENvbW1lbnQucXVlcnlTZWxlY3RvcihgLnNvY2lhbF9fdGV4dGApLnRleHRDb250ZW50ID0gY29tbWVudC5tZXNzYWdlO1xuICAgIHRlbXBsYXRlU29jaWFsQ29tbWVudC5xdWVyeVNlbGVjdG9yKGAuc29jaWFsX19waWN0dXJlYCkuc3JjID0gY29tbWVudC5hdmF0YXI7XG4gICAgdGVtcGxhdGVTb2NpYWxDb21tZW50LnF1ZXJ5U2VsZWN0b3IoYC5zb2NpYWxfX3BpY3R1cmVgKS5hbHQgPSBjb21tZW50Lm5hbWU7XG4gICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQodGVtcGxhdGVTb2NpYWxDb21tZW50KTtcbiAgfSk7XG4gIFNPQ0lBTF9DT01NRU5UUy5hcHBlbmRDaGlsZChmcmFnbWVudCk7XG59XG5cbmZ1bmN0aW9uIGdldFN0YXJ0Q29tbWVudHMoZXZ0KSB7XG4gIFNPQ0lBTF9DT01NRU5UX0NPVU5ULmZpcnN0Q2hpbGQudGV4dENvbnRlbnQgPSBgJHtNSU5fRElTUExBWUVEX0NPTU1FTlRTfSDQuNC3IGA7XG4gIHRhcmdldEluZGV4ID0gZXZ0LnRhcmdldC5zcmMubWF0Y2goTEFTVF9OVU1CRVJfSU5fU1RSSU5HKSAtIDE7XG5cbiAgaWYgKHdpbmRvdy5nYWxsZXJ5LmNvbW1lbnRzW3RhcmdldEluZGV4XS5sZW5ndGggPCBNSU5fRElTUExBWUVEX0NPTU1FTlRTKSB7XG4gICAgc3RhcnRRdWFudGl0eSA9IHdpbmRvdy5nYWxsZXJ5LmNvbW1lbnRzW3RhcmdldEluZGV4XS5sZW5ndGg7XG4gICAgU09DSUFMX0NPTU1FTlRfQ09VTlQuZmlyc3RDaGlsZC50ZXh0Q29udGVudCA9IGAke3dpbmRvdy5nYWxsZXJ5LmNvbW1lbnRzW3RhcmdldEluZGV4XS5sZW5ndGh9INC40LcgYDtcbiAgICBDT01NRU5UU19MT0FERVIuY2xhc3NMaXN0LmFkZChgaGlkZGVuYCk7XG4gIH0gZWxzZSB7XG4gICAgc3RhcnRRdWFudGl0eSA9IE1JTl9ESVNQTEFZRURfQ09NTUVOVFM7XG4gIH1cblxuICBTT0NJQUxfQ09NTUVOVFMuaW5uZXJIVE1MID0gYGA7XG5cbiAgcmVuZGVyQ29tbWVudHMoMCwgc3RhcnRRdWFudGl0eSk7XG5cbiAgbGFzdENvbW1lbnRzID0gY29tbWVudHMubGVuZ3RoO1xufVxuXG5cbmZ1bmN0aW9uIG9uTG9hZENvbW1lbnRzKCkge1xuICBsZXQgZW5kU2hvdztcbiAgaWYgKHdpbmRvdy5nYWxsZXJ5LmNvbW1lbnRzW3RhcmdldEluZGV4XS5sZW5ndGggLSBsYXN0Q29tbWVudHMgPiBNSU5fRElTUExBWUVEX0NPTU1FTlRTKSB7XG4gICAgZW5kU2hvdyA9IGxhc3RDb21tZW50cyArIE1JTl9ESVNQTEFZRURfQ09NTUVOVFM7XG4gIH0gZWxzZSB7XG4gICAgZW5kU2hvdyA9IHdpbmRvdy5nYWxsZXJ5LmNvbW1lbnRzW3RhcmdldEluZGV4XS5sZW5ndGg7XG4gICAgQ09NTUVOVFNfTE9BREVSLmNsYXNzTGlzdC5hZGQoYGhpZGRlbmApO1xuICB9XG5cbiAgcmVuZGVyQ29tbWVudHMobGFzdENvbW1lbnRzLCBlbmRTaG93KTtcblxuICBTT0NJQUxfQ09NTUVOVF9DT1VOVC5maXJzdENoaWxkLnRleHRDb250ZW50ID0gYCR7ZW5kU2hvd30g0LjQtyBgO1xuXG4gIGxhc3RDb21tZW50cyA9IGVuZFNob3c7XG59XG5cbmZ1bmN0aW9uIG9uQ2xvc2VCaWdQaG90b0VzYyhldnQpIHtcbiAgaWYgKGV2dC5rZXkgPT09IGBFc2NhcGVgKSB7XG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgY2xvc2VCaWdQaG90bygpO1xuICB9XG59XG5cbmZ1bmN0aW9uIG9wZW5CaWdQaG90byhldnQpIHtcbiAgaWYgKGV2dC50YXJnZXQgJiYgZXZ0LnRhcmdldC5tYXRjaGVzKGAucGljdHVyZV9faW1nYCkpIHtcbiAgICBCSUdfUElDVFVSRV9JTUcuc3JjID0gZXZ0LnRhcmdldC5zcmM7XG4gICAgQklHX1BJQ1RVUkUuY2xhc3NMaXN0LnJlbW92ZShgaGlkZGVuYCk7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgYm9keWApLmNsYXNzTGlzdC5hZGQoYG1vZGFsLW9wZW5gKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKGBrZXlkb3duYCwgb25DbG9zZUJpZ1Bob3RvRXNjKTtcbiAgICBDT01NRU5UU19MT0FERVIuY2xhc3NMaXN0LnJlbW92ZShgaGlkZGVuYCk7XG5cbiAgICBCSUdfUElDVFVSRV9MSUtFUy50ZXh0Q29udGVudCA9IGV2dC50YXJnZXQubmV4dEVsZW1lbnRTaWJsaW5nLmxhc3RFbGVtZW50Q2hpbGQudGV4dENvbnRlbnQ7XG4gICAgQklHX1BJQ1RVUkVfQ09NTUVOVFMudGV4dENvbnRlbnQgPSBldnQudGFyZ2V0Lm5leHRFbGVtZW50U2libGluZy5maXJzdEVsZW1lbnRDaGlsZC50ZXh0Q29udGVudDtcbiAgICBTT0NJQUxfQ0FQVElPTi50ZXh0Q29udGVudCA9IHdpbmRvdy5nYWxsZXJ5LmRlc2NyaXB0aW9uc1soU3RyaW5nKGV2dC50YXJnZXQuc3JjLm1hdGNoKExBU1RfTlVNQkVSX0lOX1NUUklORykpKSAtIDFdO1xuICAgIGdldFN0YXJ0Q29tbWVudHMoZXZ0KTtcbiAgICBDT01NRU5UU19MT0FERVIuYWRkRXZlbnRMaXN0ZW5lcihgY2xpY2tgLCBvbkxvYWRDb21tZW50cyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gY2xvc2VCaWdQaG90bygpIHtcbiAgQklHX1BJQ1RVUkUuY2xhc3NMaXN0LmFkZChgaGlkZGVuYCk7XG4gIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoYGtleWRvd25gLCBvbkNsb3NlQmlnUGhvdG9Fc2MpO1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBib2R5YCkuY2xhc3NMaXN0LnJlbW92ZShgbW9kYWwtb3BlbmApO1xuICBTT0NJQUxfQ09NTUVOVFMuaW5uZXJIVE1MID0gYGA7XG4gIENPTU1FTlRTX0xPQURFUi5yZW1vdmVFdmVudExpc3RlbmVyKGBjbGlja2AsIG9uTG9hZENvbW1lbnRzKTtcbn1cblxud2luZG93LmdhbGxlcnkuUElDVFVSRVMuYWRkRXZlbnRMaXN0ZW5lcihgY2xpY2tgLCAoZXZ0KSA9PiB7XG4gIG9wZW5CaWdQaG90byhldnQpO1xufSk7XG5cbndpbmRvdy5nYWxsZXJ5LlBJQ1RVUkVTLmFkZEV2ZW50TGlzdGVuZXIoYGtleWRvd25gLCAoZXZ0KSA9PiB7XG4gIGlmIChldnQua2V5ID09PSBgRW50ZXJgKSB7XG4gICAgQklHX1BJQ1RVUkVfSU1HLnNyYyA9IGV2dC50YXJnZXQucXVlcnlTZWxlY3RvcihgaW1nYCkuc3JjO1xuICAgIEJJR19QSUNUVVJFLmNsYXNzTGlzdC5yZW1vdmUoYGhpZGRlbmApO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYGJvZHlgKS5jbGFzc0xpc3QuYWRkKGBtb2RhbC1vcGVuYCk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihga2V5ZG93bmAsIG9uQ2xvc2VCaWdQaG90b0VzYyk7XG5cbiAgICBCSUdfUElDVFVSRV9MSUtFUy50ZXh0Q29udGVudCA9IGV2dC50YXJnZXQucXVlcnlTZWxlY3RvcihgLnBpY3R1cmVfX2xpa2VzYCkudGV4dENvbnRlbnQ7XG4gICAgQklHX1BJQ1RVUkVfQ09NTUVOVFMudGV4dENvbnRlbnQgPSBldnQudGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoYC5waWN0dXJlX19jb21tZW50c2ApLnRleHRDb250ZW50O1xuICB9XG59KTtcblxuQklHX1BJQ1RVUkVfQ0FOQ0VMLmFkZEV2ZW50TGlzdGVuZXIoYGNsaWNrYCwgKCkgPT4ge1xuICBjbG9zZUJpZ1Bob3RvKCk7XG59KTtcblxud2luZG93LmJpZ1Bob3RvID0ge1xuICBTT0NJQUxfQ0FQVElPTlxufTtcbiIsIid1c2Ugc3RyaWN0JztcbmNvbnN0IERFRkFVTFRfU0NBTEUgPSBgMTAwJWA7XG5cbmNvbnN0IFVQTE9BRF9GSUxFID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI3VwbG9hZC1maWxlYCk7XG5jb25zdCBJTUdfVVBMT0FEX09WRVJMQVkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuaW1nLXVwbG9hZF9fb3ZlcmxheWApO1xuY29uc3QgVVBMT0FEX0NBTkNFTCA9IElNR19VUExPQURfT1ZFUkxBWS5xdWVyeVNlbGVjdG9yKGAjdXBsb2FkLWNhbmNlbGApO1xuY29uc3QgVEVYVF9ERVNDUklQVElPTiA9IElNR19VUExPQURfT1ZFUkxBWS5xdWVyeVNlbGVjdG9yKGAudGV4dF9fZGVzY3JpcHRpb25gKTtcbmNvbnN0IFVQTE9BRF9GT1JNID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLmltZy11cGxvYWRfX2Zvcm1gKTtcbmNvbnN0IE1BSU4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBtYWluYCk7XG5cbmNvbnN0IFRFTVBMQVRFX1NVQ0NFU1MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjc3VjY2Vzc2ApLmNvbnRlbnQucXVlcnlTZWxlY3RvcihgLnN1Y2Nlc3NgKTtcbmNvbnN0IFNVQ0NFU1NfT1ZFUkxBWSA9IFRFTVBMQVRFX1NVQ0NFU1MucXVlcnlTZWxlY3RvcihgLnN1Y2Nlc3NfX292ZXJsYXlgKTtcbmNvbnN0IFNVQ0NFU1NfQlVUVE9OID0gVEVNUExBVEVfU1VDQ0VTUy5xdWVyeVNlbGVjdG9yKGAuc3VjY2Vzc19fYnV0dG9uYCk7XG5cbmNvbnN0IFRFTVBMQVRFX0VSUk9SID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI2Vycm9yYCkuY29udGVudC5xdWVyeVNlbGVjdG9yKGAuZXJyb3JgKTtcbmNvbnN0IEVSUk9SX09WRVJMQVkgPSBURU1QTEFURV9FUlJPUi5xdWVyeVNlbGVjdG9yKGAuZXJyb3JfX292ZXJsYXlgKTtcbmNvbnN0IEVSUk9SX0JVVFRPTiA9IFRFTVBMQVRFX0VSUk9SLnF1ZXJ5U2VsZWN0b3IoYC5lcnJvcl9fYnV0dG9uYCk7XG5cbmZ1bmN0aW9uIG9uRWRpdG9yRXNjUHJlc3MoZXZ0KSB7XG4gIGlmIChldnQua2V5ID09PSBgRXNjYXBlYCAmJiBkb2N1bWVudC5hY3RpdmVFbGVtZW50ICE9PSB3aW5kb3cuaGFzaHRhZ3MuVEVYVF9IQVNIVEFHUyAmIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgIT09IFRFWFRfREVTQ1JJUFRJT04pIHtcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICBjbG9zZUVkaXRvcigpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNsb3NlRWRpdG9yKCkge1xuICBJTUdfVVBMT0FEX09WRVJMQVkuY2xhc3NMaXN0LmFkZChgaGlkZGVuYCk7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYGJvZHlgKS5jbGFzc0xpc3QucmVtb3ZlKGBtb2RhbC1vcGVuYCk7XG4gIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoYGtleWRvd25gLCBvbkVkaXRvckVzY1ByZXNzKTtcbiAgd2luZG93LmZvcm0uVVBMT0FEX0ZJTEUudmFsdWUgPSBgYDtcbn1cblxuZnVuY3Rpb24gb3BlbkVkaXRvcigpIHtcbiAgSU1HX1VQTE9BRF9PVkVSTEFZLmNsYXNzTGlzdC5yZW1vdmUoYGhpZGRlbmApO1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBib2R5YCkuY2xhc3NMaXN0LmFkZChgbW9kYWwtb3BlbmApO1xuICBVUExPQURfQ0FOQ0VMLmFkZEV2ZW50TGlzdGVuZXIoYGNsaWNrYCwgY2xvc2VFZGl0b3IpO1xuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKGBrZXlkb3duYCwgb25FZGl0b3JFc2NQcmVzcyk7XG4gIHdpbmRvdy5lZmZlY3RzLmFwcGx5RWZmZWN0KGBlZmZlY3RzX19wcmV2aWV3LS1ub25lYCk7XG4gIHdpbmRvdy5zY2FsZS5JTUdfVVBMT0FEX1BSRVZJRVcucmVtb3ZlQXR0cmlidXRlKGBzdHlsZWApO1xuICB3aW5kb3cuZWZmZWN0cy5FRkZFQ1RfTEVWRUwuc3R5bGUuZGlzcGxheSA9IGBub25lYDtcbiAgd2luZG93LnNjYWxlLlNDQUxFX1ZBTFVFLnZhbHVlID0gREVGQVVMVF9TQ0FMRTtcbn1cblxuZnVuY3Rpb24gcmVzZXRGb3JtKCkge1xuICB3aW5kb3cuZWZmZWN0cy5hcHBseUVmZmVjdChgZWZmZWN0c19fcHJldmlldy0tbm9uZWApO1xuICB3aW5kb3cuZWZmZWN0cy5FRkZFQ1RfTEVWRUwuc3R5bGUuZGlzcGxheSA9IGBub25lYDtcbiAgd2luZG93Lmhhc2h0YWdzLlRFWFRfSEFTSFRBR1MudmFsdWUgPSBgYDtcbiAgVEVYVF9ERVNDUklQVElPTi52YWx1ZSA9IGBgO1xuICBJTUdfVVBMT0FEX09WRVJMQVkuY2xhc3NMaXN0LmFkZChgaGlkZGVuYCk7XG4gIHdpbmRvdy5zY2FsZS5TQ0FMRV9WQUxVRS52YWx1ZSA9IERFRkFVTFRfU0NBTEU7XG59XG5cbmZ1bmN0aW9uIHN1Y2Nlc3NIYW5kbGVyKCkge1xuICByZXNldEZvcm0oKTtcbiAgTUFJTi5pbnNlcnRBZGphY2VudEVsZW1lbnQoYGFmdGVyYmVnaW5gLCBURU1QTEFURV9TVUNDRVNTKTtcbn1cblxuZnVuY3Rpb24gZXJyb3JIYW5kbGVyKCkge1xuICByZXNldEZvcm0oKTtcbiAgTUFJTi5pbnNlcnRBZGphY2VudEVsZW1lbnQoYGFmdGVyYmVnaW5gLCBURU1QTEFURV9FUlJPUik7XG59XG5cbmZ1bmN0aW9uIGNsZWFuRXZlbnRzKCkge1xuICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKGBrZXlkb3duYCwgb25SZXN1bHRFc2NQcmVzcyk7XG4gIFNVQ0NFU1NfQlVUVE9OLnJlbW92ZUV2ZW50TGlzdGVuZXIoYGNsaWNrYCwgb25TdWNjZXNzQ2xvc2UpO1xuICBTVUNDRVNTX09WRVJMQVkucmVtb3ZlRXZlbnRMaXN0ZW5lcihgY2xpY2tgLCBvblN1Y2Nlc3NDbG9zZSk7XG5cbiAgRVJST1JfQlVUVE9OLnJlbW92ZUV2ZW50TGlzdGVuZXIoYGNsaWNrYCwgb25FcnJvckNsb3NlKTtcbiAgRVJST1JfT1ZFUkxBWS5yZW1vdmVFdmVudExpc3RlbmVyKGBjbGlja2AsIG9uRXJyb3JDbG9zZSk7XG59XG5cbmZ1bmN0aW9uIG9uU3VjY2Vzc0Nsb3NlKCkge1xuICBURU1QTEFURV9TVUNDRVNTLnJlbW92ZSgpO1xuICBjbGVhbkV2ZW50cygpO1xufVxuXG5mdW5jdGlvbiBvbkVycm9yQ2xvc2UoKSB7XG4gIFRFTVBMQVRFX0VSUk9SLnJlbW92ZSgpO1xuICBjbGVhbkV2ZW50cygpO1xufVxuXG5mdW5jdGlvbiBvblJlc3VsdEVzY1ByZXNzKGV2dCkge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgaWYgKGV2dC5rZXkgPT09IGBFc2NhcGVgICYmIE1BSU4uZmlyc3RDaGlsZC5jbGFzc05hbWUgPT09IGBzdWNjZXNzYCkge1xuICAgIG9uU3VjY2Vzc0Nsb3NlKCk7XG4gIH0gZWxzZSB7XG4gICAgb25FcnJvckNsb3NlKCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gb25Gb3JtU3VibWl0KGV2dCkge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcblxuICB3aW5kb3cuYmFja2VuZC5zZW5kRm9ybShuZXcgRm9ybURhdGEoVVBMT0FEX0ZPUk0pLCBzdWNjZXNzSGFuZGxlciwgZXJyb3JIYW5kbGVyKTtcblxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKGBrZXlkb3duYCwgb25SZXN1bHRFc2NQcmVzcyk7XG4gIFNVQ0NFU1NfQlVUVE9OLmFkZEV2ZW50TGlzdGVuZXIoYGNsaWNrYCwgb25TdWNjZXNzQ2xvc2UpO1xuICBTVUNDRVNTX09WRVJMQVkuYWRkRXZlbnRMaXN0ZW5lcihgY2xpY2tgLCBvblN1Y2Nlc3NDbG9zZSk7XG4gIEVSUk9SX0JVVFRPTi5hZGRFdmVudExpc3RlbmVyKGBjbGlja2AsIG9uRXJyb3JDbG9zZSk7XG4gIEVSUk9SX09WRVJMQVkuYWRkRXZlbnRMaXN0ZW5lcihgY2xpY2tgLCBvbkVycm9yQ2xvc2UpO1xuICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKGBrZXlkb3duYCwgb25FZGl0b3JFc2NQcmVzcyk7XG4gIFVQTE9BRF9GSUxFLnZhbHVlID0gYGA7XG59XG5cblVQTE9BRF9GT1JNLmFkZEV2ZW50TGlzdGVuZXIoYHN1Ym1pdGAsIG9uRm9ybVN1Ym1pdCk7XG5VUExPQURfRklMRS5hZGRFdmVudExpc3RlbmVyKGBjaGFuZ2VgLCBvcGVuRWRpdG9yKTtcblxud2luZG93LmZvcm0gPSB7XG4gIFVQTE9BRF9GSUxFLFxuICBJTUdfVVBMT0FEX09WRVJMQVksXG4gIG9wZW5FZGl0b3Jcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbmNvbnN0IE9ORV9RVUFSVEVSX1BFUkNFTlQgPSBgMjUlYDtcbmNvbnN0IEhBTEZfUEVSQ0VOVCA9IGA1MCVgO1xuY29uc3QgVEhSRUVfUVVBUlRFUlNfUEVSQ0VOVCA9IGA3NSVgO1xuY29uc3QgTUFYX1ZBTFVFX1BFUkNFTlQgPSBgMTAwJWA7XG5jb25zdCBPTkVfUVVBUlRFUl9ERUNJTUFMID0gMC4yNTtcbmNvbnN0IEhBTEZfREVDSU1BTCA9IDAuNTtcbmNvbnN0IFRIUkVFX1FVQVJURVJTX0RFQ0lNQUwgPSAwLjc1O1xuY29uc3QgTUFYX1ZBTFVFX0RFQ0lNQUwgPSAxO1xuXG5jb25zdCBTQ0FMRV9TTUFMTEVSID0gd2luZG93LmZvcm0uSU1HX1VQTE9BRF9PVkVSTEFZLnF1ZXJ5U2VsZWN0b3IoYC5zY2FsZV9fY29udHJvbC0tc21hbGxlcmApO1xuY29uc3QgU0NBTEVfQklHR0VSID0gd2luZG93LmZvcm0uSU1HX1VQTE9BRF9PVkVSTEFZLnF1ZXJ5U2VsZWN0b3IoYC5zY2FsZV9fY29udHJvbC0tYmlnZ2VyIGApO1xuY29uc3QgU0NBTEVfVkFMVUUgPSB3aW5kb3cuZm9ybS5JTUdfVVBMT0FEX09WRVJMQVkucXVlcnlTZWxlY3RvcihgLnNjYWxlX19jb250cm9sLS12YWx1ZWApO1xuY29uc3QgSU1HX1VQTE9BRF9QUkVWSUVXID0gd2luZG93LmZvcm0uSU1HX1VQTE9BRF9PVkVSTEFZLnF1ZXJ5U2VsZWN0b3IoYC5pbWctdXBsb2FkX19wcmV2aWV3YCk7XG5cbmZ1bmN0aW9uIGluY3JlYXNlU2NhbGUoKSB7XG4gIHN3aXRjaCAoU0NBTEVfVkFMVUUudmFsdWUpIHtcbiAgICBjYXNlIE9ORV9RVUFSVEVSX1BFUkNFTlQ6XG4gICAgICBJTUdfVVBMT0FEX1BSRVZJRVcuc3R5bGUgPSBgdHJhbnNmb3JtOiBzY2FsZSgke0hBTEZfREVDSU1BTH0pYDtcbiAgICAgIFNDQUxFX1ZBTFVFLnZhbHVlID0gSEFMRl9QRVJDRU5UO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBIQUxGX1BFUkNFTlQ6XG4gICAgICBJTUdfVVBMT0FEX1BSRVZJRVcuc3R5bGUgPSBgdHJhbnNmb3JtOiBzY2FsZSgke1RIUkVFX1FVQVJURVJTX0RFQ0lNQUx9KWA7XG4gICAgICBTQ0FMRV9WQUxVRS52YWx1ZSA9IFRIUkVFX1FVQVJURVJTX1BFUkNFTlQ7XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgSU1HX1VQTE9BRF9QUkVWSUVXLnN0eWxlID0gYHRyYW5zZm9ybTogc2NhbGUoJHtNQVhfVkFMVUVfREVDSU1BTH0pYDtcbiAgICAgIFNDQUxFX1ZBTFVFLnZhbHVlID0gTUFYX1ZBTFVFX1BFUkNFTlQ7XG4gICAgICBicmVhaztcbiAgfVxufVxuXG5mdW5jdGlvbiBkZWNyZWFzZVNjYWxlKCkge1xuICBzd2l0Y2ggKFNDQUxFX1ZBTFVFLnZhbHVlKSB7XG4gICAgY2FzZSBNQVhfVkFMVUVfUEVSQ0VOVDpcbiAgICAgIElNR19VUExPQURfUFJFVklFVy5zdHlsZSA9IGB0cmFuc2Zvcm06IHNjYWxlKCR7VEhSRUVfUVVBUlRFUlNfREVDSU1BTH0pYDtcbiAgICAgIFNDQUxFX1ZBTFVFLnZhbHVlID0gVEhSRUVfUVVBUlRFUlNfUEVSQ0VOVDtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgVEhSRUVfUVVBUlRFUlNfUEVSQ0VOVDpcbiAgICAgIElNR19VUExPQURfUFJFVklFVy5zdHlsZSA9IGB0cmFuc2Zvcm06IHNjYWxlKCR7SEFMRl9ERUNJTUFMfSlgO1xuICAgICAgU0NBTEVfVkFMVUUudmFsdWUgPSBIQUxGX1BFUkNFTlQ7XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgSU1HX1VQTE9BRF9QUkVWSUVXLnN0eWxlID0gYHRyYW5zZm9ybTogc2NhbGUoJHtPTkVfUVVBUlRFUl9ERUNJTUFMfSlgO1xuICAgICAgU0NBTEVfVkFMVUUudmFsdWUgPSBPTkVfUVVBUlRFUl9QRVJDRU5UO1xuICAgICAgYnJlYWs7XG4gIH1cbn1cblxuU0NBTEVfU01BTExFUi5hZGRFdmVudExpc3RlbmVyKGBjbGlja2AsICgpID0+IHtcbiAgZGVjcmVhc2VTY2FsZSgpO1xufSk7XG5TQ0FMRV9CSUdHRVIuYWRkRXZlbnRMaXN0ZW5lcihgY2xpY2tgLCAoKSA9PiB7XG4gIGluY3JlYXNlU2NhbGUoKTtcbn0pO1xuXG53aW5kb3cuc2NhbGUgPSB7XG4gIElNR19VUExPQURfUFJFVklFVyxcbiAgU0NBTEVfVkFMVUVcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbmNvbnN0IE1BWF9WQUxVRSA9IDEwMDtcbmNvbnN0IE1BWF9XSURUSCA9IDQ1MDtcbmNvbnN0IE9ORV9USElSRCA9IDMzLjM7XG5jb25zdCBIQUxGID0gNTA7XG5jb25zdCBORVhUX1ZBTFVFID0gMTtcblxuY29uc3QgRUZGRUNUU19MSVNUID0gd2luZG93LmZvcm0uSU1HX1VQTE9BRF9PVkVSTEFZLnF1ZXJ5U2VsZWN0b3IoYC5lZmZlY3RzX19saXN0YCk7XG5jb25zdCBFRkZFQ1RfTEVWRUwgPSB3aW5kb3cuZm9ybS5JTUdfVVBMT0FEX09WRVJMQVkucXVlcnlTZWxlY3RvcihgLmVmZmVjdC1sZXZlbGApO1xuY29uc3QgRUZGRUNUX0xFVkVMX1ZBTFVFID0gRUZGRUNUX0xFVkVMLnF1ZXJ5U2VsZWN0b3IoYC5lZmZlY3QtbGV2ZWxfX3ZhbHVlYCk7XG5jb25zdCBFRkZFQ1RTX1BSRVZJRVdTID0gRUZGRUNUU19MSVNULnF1ZXJ5U2VsZWN0b3JBbGwoYC5lZmZlY3RzX19wcmV2aWV3YCk7XG5jb25zdCBFRkZFQ1RfTEVWRUxfUElOID0gRUZGRUNUX0xFVkVMLnF1ZXJ5U2VsZWN0b3IoYC5lZmZlY3QtbGV2ZWxfX3BpbmApO1xuY29uc3QgRUZGRUNUX0xFVkVMX0RFUFRIID0gRUZGRUNUX0xFVkVMLnF1ZXJ5U2VsZWN0b3IoYC5lZmZlY3QtbGV2ZWxfX2RlcHRoYCk7XG5cbmZ1bmN0aW9uIGFwcGx5RWZmZWN0KGVmZmVjdCkge1xuICB3aW5kb3cuc2NhbGUuSU1HX1VQTE9BRF9QUkVWSUVXLmNsYXNzTmFtZSA9IGBpbWctdXBsb2FkX19wcmV2aWV3ICR7ZWZmZWN0fWA7XG59XG5cbmZ1bmN0aW9uIHNlbGVjdEVmZmVjdChldnQpIHtcbiAgc3dpdGNoIChldnQudGFyZ2V0LnZhbHVlKSB7XG4gICAgY2FzZSBgY2hyb21lYDpcbiAgICAgIGFwcGx5RWZmZWN0KGBlZmZlY3RzX19wcmV2aWV3LS1jaHJvbWVgKTtcbiAgICAgIEVGRkVDVF9MRVZFTC5zdHlsZS5kaXNwbGF5ID0gYGJsb2NrYDtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgYHNlcGlhYDpcbiAgICAgIGFwcGx5RWZmZWN0KGBlZmZlY3RzX19wcmV2aWV3LS1zZXBpYWApO1xuICAgICAgRUZGRUNUX0xFVkVMLnN0eWxlLmRpc3BsYXkgPSBgYmxvY2tgO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBgbWFydmluYDpcbiAgICAgIGFwcGx5RWZmZWN0KGBlZmZlY3RzX19wcmV2aWV3LS1tYXJ2aW5gKTtcbiAgICAgIEVGRkVDVF9MRVZFTC5zdHlsZS5kaXNwbGF5ID0gYGJsb2NrYDtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgYHBob2Jvc2A6XG4gICAgICBhcHBseUVmZmVjdChgZWZmZWN0c19fcHJldmlldy0tcGhvYm9zYCk7XG4gICAgICBFRkZFQ1RfTEVWRUwuc3R5bGUuZGlzcGxheSA9IGBibG9ja2A7XG4gICAgICBicmVhaztcbiAgICBjYXNlIGBoZWF0YDpcbiAgICAgIGFwcGx5RWZmZWN0KGBlZmZlY3RzX19wcmV2aWV3LS1oZWF0YCk7XG4gICAgICBFRkZFQ1RfTEVWRUwuc3R5bGUuZGlzcGxheSA9IGBibG9ja2A7XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgYXBwbHlFZmZlY3QoYGVmZmVjdHNfX3ByZXZpZXctLW5vbmVgKTtcbiAgICAgIEVGRkVDVF9MRVZFTC5zdHlsZS5kaXNwbGF5ID0gYG5vbmVgO1xuICAgICAgYnJlYWs7XG4gIH1cbn1cblxuZnVuY3Rpb24gc2V0RGVmYXVsdFZhbHVlKCkge1xuICBFRkZFQ1RfTEVWRUxfREVQVEguc3R5bGUud2lkdGggPSBgJHtNQVhfVkFMVUV9JWA7XG4gIEVGRkVDVF9MRVZFTF9QSU4uc3R5bGUubGVmdCA9IGAke01BWF9WQUxVRX0lYDtcbiAgRUZGRUNUX0xFVkVMX1ZBTFVFLnNldEF0dHJpYnV0ZShgdmFsdWVgLCBNQVhfVkFMVUUpO1xufVxuXG5FRkZFQ1RTX0xJU1QuYWRkRXZlbnRMaXN0ZW5lcihgY2hhbmdlYCwgKGV2dCkgPT4ge1xuICBzZWxlY3RFZmZlY3QoZXZ0KTtcbiAgd2luZG93LnNjYWxlLklNR19VUExPQURfUFJFVklFVy5yZW1vdmVBdHRyaWJ1dGUoYHN0eWxlYCk7XG4gIHdpbmRvdy5zY2FsZS5TQ0FMRV9WQUxVRS52YWx1ZSA9IGAke01BWF9WQUxVRX0lYDtcbiAgc2V0RGVmYXVsdFZhbHVlKCk7XG59KTtcblxuZnVuY3Rpb24gc2V0SW50ZW5zaXR5RWZmZWN0KHZhbHVlKSB7XG4gIHN3aXRjaCAod2luZG93LnNjYWxlLklNR19VUExPQURfUFJFVklFVy5jbGFzc05hbWUpIHtcbiAgICBjYXNlIGBpbWctdXBsb2FkX19wcmV2aWV3IGVmZmVjdHNfX3ByZXZpZXctLWNocm9tZWA6XG4gICAgICB3aW5kb3cuc2NhbGUuSU1HX1VQTE9BRF9QUkVWSUVXLnN0eWxlID0gYGZpbHRlcjogZ3JheXNjYWxlKCR7dmFsdWUgLyBNQVhfVkFMVUV9KWA7XG4gICAgICBicmVhaztcbiAgICBjYXNlIGBpbWctdXBsb2FkX19wcmV2aWV3IGVmZmVjdHNfX3ByZXZpZXctLXNlcGlhYDpcbiAgICAgIHdpbmRvdy5zY2FsZS5JTUdfVVBMT0FEX1BSRVZJRVcuc3R5bGUgPSBgZmlsdGVyOiBzZXBpYSgke3ZhbHVlIC8gTUFYX1ZBTFVFfSlgO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBgaW1nLXVwbG9hZF9fcHJldmlldyBlZmZlY3RzX19wcmV2aWV3LS1tYXJ2aW5gOlxuICAgICAgd2luZG93LnNjYWxlLklNR19VUExPQURfUFJFVklFVy5zdHlsZSA9IGBmaWx0ZXI6IGludmVydCgke3ZhbHVlfSUpYDtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgYGltZy11cGxvYWRfX3ByZXZpZXcgZWZmZWN0c19fcHJldmlldy0tcGhvYm9zYDpcbiAgICAgIHdpbmRvdy5zY2FsZS5JTUdfVVBMT0FEX1BSRVZJRVcuc3R5bGUgPSBgZmlsdGVyOiBibHVyKCR7dmFsdWUgLyBPTkVfVEhJUkR9cHgpYDtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgYGltZy11cGxvYWRfX3ByZXZpZXcgZWZmZWN0c19fcHJldmlldy0taGVhdGA6XG4gICAgICB3aW5kb3cuc2NhbGUuSU1HX1VQTE9BRF9QUkVWSUVXLnN0eWxlID0gYGZpbHRlcjogYnJpZ2h0bmVzcygke3ZhbHVlIC8gSEFMRiArIE5FWFRfVkFMVUV9KWA7XG4gICAgICBicmVhaztcbiAgfVxufVxuXG5FRkZFQ1RfTEVWRUxfUElOLmFkZEV2ZW50TGlzdGVuZXIoYG1vdXNlZG93bmAsIChldnQpID0+IHtcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gIGxldCBzdGFydFggPSBldnQuY2xpZW50WDtcblxuICBmdW5jdGlvbiBvbk1vdXNlTW92ZShtb3ZlRXZ0KSB7XG4gICAgbW92ZUV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgbGV0IHNoaWZ0ID0gc3RhcnRYIC0gbW92ZUV2dC5jbGllbnRYO1xuXG4gICAgc3RhcnRYID0gbW92ZUV2dC5jbGllbnRYO1xuXG4gICAgbGV0IHBvc2l0aW9uUGluID0gRUZGRUNUX0xFVkVMX1BJTi5vZmZzZXRMZWZ0IC0gc2hpZnQ7XG5cbiAgICBFRkZFQ1RfTEVWRUxfUElOLnN0eWxlLmxlZnQgPSBgJHtwb3NpdGlvblBpbn1weGA7XG4gICAgRUZGRUNUX0xFVkVMX0RFUFRILnN0eWxlLndpZHRoID0gYCR7KHBvc2l0aW9uUGluICogTUFYX1ZBTFVFIC8gTUFYX1dJRFRIKX0lYDtcblxuICAgIGlmIChwb3NpdGlvblBpbiA+PSBNQVhfV0lEVEgpIHtcbiAgICAgIEVGRkVDVF9MRVZFTF9QSU4uc3R5bGUubGVmdCA9IGAke01BWF9XSURUSH1weGA7XG4gICAgICBFRkZFQ1RfTEVWRUxfREVQVEguc3R5bGUud2lkdGggPSBgJHtNQVhfVkFMVUV9JWA7XG4gICAgfVxuICAgIGlmIChwb3NpdGlvblBpbiA8PSBgMGApIHtcbiAgICAgIEVGRkVDVF9MRVZFTF9QSU4uc3R5bGUubGVmdCA9IGAwcHhgO1xuICAgICAgRUZGRUNUX0xFVkVMX0RFUFRILnN0eWxlLndpZHRoID0gYDAlYDtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBvbk1vdXNlVXAodXBFdnQpIHtcbiAgICB1cEV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGxldCB2YWx1ZURlcHRoID0gcGFyc2VGbG9hdChFRkZFQ1RfTEVWRUxfREVQVEguc3R5bGUud2lkdGgpO1xuXG4gICAgRUZGRUNUX0xFVkVMX1ZBTFVFLnNldEF0dHJpYnV0ZShgdmFsdWVgLCB2YWx1ZURlcHRoKTtcbiAgICBzZXRJbnRlbnNpdHlFZmZlY3QodmFsdWVEZXB0aCk7XG5cbiAgICB3aW5kb3cuZm9ybS5JTUdfVVBMT0FEX09WRVJMQVkucmVtb3ZlRXZlbnRMaXN0ZW5lcihgbW91c2Vtb3ZlYCwgb25Nb3VzZU1vdmUpO1xuICAgIHdpbmRvdy5mb3JtLklNR19VUExPQURfT1ZFUkxBWS5yZW1vdmVFdmVudExpc3RlbmVyKGBtb3VzZXVwYCwgb25Nb3VzZVVwKTtcbiAgfVxuXG4gIHdpbmRvdy5mb3JtLklNR19VUExPQURfT1ZFUkxBWS5hZGRFdmVudExpc3RlbmVyKGBtb3VzZW1vdmVgLCBvbk1vdXNlTW92ZSk7XG4gIHdpbmRvdy5mb3JtLklNR19VUExPQURfT1ZFUkxBWS5hZGRFdmVudExpc3RlbmVyKGBtb3VzZXVwYCwgb25Nb3VzZVVwKTtcbn0pO1xuXG53aW5kb3cuZWZmZWN0cyA9IHtcbiAgTUFYX1ZBTFVFLFxuICBhcHBseUVmZmVjdCxcbiAgRUZGRUNUX0xFVkVMLFxuICBFRkZFQ1RTX1BSRVZJRVdTXG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBRVUFOVFVUWV9IQVNIVEFHUyA9IDU7XG5jb25zdCBURVhUX0hBU0hUQUdTID0gd2luZG93LmZvcm0uSU1HX1VQTE9BRF9PVkVSTEFZLnF1ZXJ5U2VsZWN0b3IoYC50ZXh0X19oYXNodGFnc2ApO1xuY29uc3QgSU1HX1VQTE9BRF9TVUJNSVQgPSB3aW5kb3cuZm9ybS5JTUdfVVBMT0FEX09WRVJMQVkucXVlcnlTZWxlY3RvcihgLmltZy11cGxvYWRfX3N1Ym1pdGApO1xuXG5jb25zdCBSRSA9IC9eKCNbYS16QS1a0LAt0Y/QkC3QrzAtOV17MSwxOX18JCkkLztcblxuZnVuY3Rpb24gZ2V0Q2hlY2tIYXNodGFncygpIHtcbiAgbGV0IGhhc2h0YWdzID0gVEVYVF9IQVNIVEFHUy52YWx1ZS50b0xvd2VyQ2FzZSgpLnNwbGl0KGAgYCkuZmlsdGVyKGZ1bmN0aW9uICh0YWcpIHtcbiAgICByZXR1cm4gdGFnO1xuICB9KTtcblxuICBoYXNodGFncy5mb3JFYWNoKCh0YWcsIGkpID0+IHtcbiAgICBpZiAoIVJFLnRlc3QodGFnKSkge1xuICAgICAgVEVYVF9IQVNIVEFHUy5zZXRDdXN0b21WYWxpZGl0eShg0L3QtdC60L7RgNGA0LXQutGC0L3Ri9C5INGF0Y3RiC3RgtGN0LNgKTtcbiAgICB9XG4gICAgaWYgKHRhZy5pbmRleE9mKGAjYCwgMSkgPiAtMSkge1xuICAgICAgVEVYVF9IQVNIVEFHUy5zZXRDdXN0b21WYWxpZGl0eShg0YXRjdGILdGC0LXQs9C4INGA0LDQt9C00LXQu9GP0Y7RgtGB0Y8g0L/RgNC+0LHQtdC70LDQvNC4YCk7XG4gICAgfVxuICAgIGlmIChoYXNodGFncy5sZW5ndGggPiBRVUFOVFVUWV9IQVNIVEFHUykge1xuICAgICAgVEVYVF9IQVNIVEFHUy5zZXRDdXN0b21WYWxpZGl0eShg0L3QtdC70YzQt9GPINGD0LrQsNC30LDRgtGMINCx0L7Qu9GM0YjQtSA1INGF0Y3RiC3RgtC10LPQvtCyYCk7XG4gICAgfVxuICAgIGlmIChoYXNodGFncy5pbmRleE9mKHRhZywgaSArIDEpID4gLTEpIHtcbiAgICAgIFRFWFRfSEFTSFRBR1Muc2V0Q3VzdG9tVmFsaWRpdHkoXG4gICAgICAgIGDQvtC00LjQvSDQuCDRgtC+0YIg0LbQtSDRhdGN0Ygt0YLQtdCzINC90LUg0LzQvtC20LXRgiDQsdGL0YLRjCDQuNGB0L/QvtC70YzQt9C+0LLQsNC9INC00LLQsNC20LTRi2BcbiAgICAgICk7XG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gY2xlYXJNZXNzYWdlKCkge1xuICBURVhUX0hBU0hUQUdTLnNldEN1c3RvbVZhbGlkaXR5KGBgKTtcbn1cblxuSU1HX1VQTE9BRF9TVUJNSVQuYWRkRXZlbnRMaXN0ZW5lcihgY2xpY2tgLCAoKSA9PiB7XG4gIGdldENoZWNrSGFzaHRhZ3MoKTtcbn0pO1xuXG5URVhUX0hBU0hUQUdTLmFkZEV2ZW50TGlzdGVuZXIoYGlucHV0YCwgKCkgPT4ge1xuICBjbGVhck1lc3NhZ2UoKTtcbn0pO1xuXG53aW5kb3cuaGFzaHRhZ3MgPSB7XG4gIFRFWFRfSEFTSFRBR1Ncbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbmNvbnN0IEZJTEVfVFlQRVMgPSBbYGdpZmAsIGBqcGdgLCBganBlZ2AsIGBwbmdgXTtcblxuY29uc3QgUFJFVklFVyA9IHdpbmRvdy5zY2FsZS5JTUdfVVBMT0FEX1BSRVZJRVcucXVlcnlTZWxlY3RvcihgaW1nYCk7XG5cbndpbmRvdy5mb3JtLlVQTE9BRF9GSUxFLmFkZEV2ZW50TGlzdGVuZXIoYGNoYW5nZWAsICgpID0+IHtcbiAgbGV0IGZpbGUgPSB3aW5kb3cuZm9ybS5VUExPQURfRklMRS5maWxlc1swXTtcbiAgbGV0IGZpbGVOYW1lID0gZmlsZS5uYW1lLnRvTG93ZXJDYXNlKCk7XG5cbiAgbGV0IG1hdGNoZXMgPSBGSUxFX1RZUEVTLnNvbWUoZnVuY3Rpb24gKGl0KSB7XG4gICAgcmV0dXJuIGZpbGVOYW1lLmVuZHNXaXRoKGl0KTtcbiAgfSk7XG5cbiAgaWYgKG1hdGNoZXMpIHtcbiAgICBsZXQgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcblxuICAgIHJlYWRlci5hZGRFdmVudExpc3RlbmVyKGBsb2FkYCwgKCkgPT4ge1xuICAgICAgUFJFVklFVy5zcmMgPSByZWFkZXIucmVzdWx0O1xuICAgICAgd2luZG93LmVmZmVjdHMuRUZGRUNUU19QUkVWSUVXUy5mb3JFYWNoKChwcmV2aWV3KSA9PiB7XG4gICAgICAgIHByZXZpZXcuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybChcIiR7cmVhZGVyLnJlc3VsdH1cIilgO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTtcbiAgfVxufSk7XG4iXSwic291cmNlUm9vdCI6IiJ9